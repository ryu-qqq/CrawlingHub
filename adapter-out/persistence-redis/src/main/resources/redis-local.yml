# ========================================
# Redis Configuration (Local Development)
# ========================================
# Local Redis server (Docker or native)
# docker run -d --name redis -p 6379:6379 redis:7-alpine
# ========================================

spring:
  data:
    redis:
      host: localhost
      port: 6379
      # password 없음 (local Redis는 AUTH 없이 동작)
      database: 0
      timeout: 3000ms
      connect-timeout: 3000ms

# ========================================
# Redisson Configuration (Local)
# ========================================
# Note: Redisson Spring Boot Starter auto-configures using spring.data.redis
# See redis.yml for custom configuration options

# ========================================
# Distributed Lock Configuration (Local)
# ========================================
distributed-lock:
  default-wait-time-ms: 5000
  default-lease-time-ms: 30000
  key-prefix: "crawlinghub:lock:"

  crawl-trigger:
    wait-time-ms: 3000
    lease-time-ms: 60000

  crawl-task:
    wait-time-ms: 5000
    lease-time-ms: 300000

# ========================================
# UserAgent Pool Configuration (Local)
# ========================================
useragent-pool:
  # Rate Limiting (Sliding Window)
  rate-limit:
    # 시간당 최대 요청 수
    max-tokens: 80
    # 윈도우 지속 시간 (ISO-8601 Duration: PT1H = 1시간)
    window-duration: PT1H

  # Session Management
  session:
    # 선제적 세션 갱신 버퍼 (분)
    # 세션 만료 N분 전에 갱신 시작
    renewal-buffer-minutes: 5

  # Health Score
  health:
    # SUSPENDED로 전환되는 최소 점수
    suspension-threshold: 30

  # Key Prefixes
  key-prefix: "useragent:"

logging:
  level:
    org.redisson: DEBUG
