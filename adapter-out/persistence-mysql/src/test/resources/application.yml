# JPA 통합 테스트용 설정
# @DataJpaTest는 H2 in-memory 데이터베이스 사용
# Flyway migration은 MySQL 문법이므로 비활성화하고 JPA DDL auto 사용

spring:
  # Flyway 비활성화 (MySQL migration SQL은 H2와 호환 불가)
  flyway:
    enabled: false

  # JPA 설정
  jpa:
    hibernate:
      # DDL auto로 스키마 자동 생성
      ddl-auto: create-drop
    properties:
      hibernate:
        # 콘솔에 SQL 출력
        show_sql: true
        format_sql: true
        # H2 방언 사용
        dialect: org.hibernate.dialect.H2Dialect
    # JPA repository 자동 활성화
    repositories:
      enabled: true

  # H2 데이터베이스 설정
  datasource:
    # H2 in-memory 데이터베이스
    url: jdbc:h2:mem:testdb;MODE=MySQL;DATABASE_TO_LOWER=TRUE;CASE_INSENSITIVE_IDENTIFIERS=TRUE
    driver-class-name: org.h2.Driver
    username: sa
    password:

  # H2 콘솔 (테스트 디버깅용)
  h2:
    console:
      enabled: true

# 로깅 레벨
logging:
  level:
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
    org.springframework.jdbc.core: DEBUG
