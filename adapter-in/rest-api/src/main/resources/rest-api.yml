# ===============================================
# REST API Adapter Configuration
# ===============================================
# REST API 어댑터 전용 설정
# 애플리케이션 런타임 설정은 bootstrap/bootstrap-web-api/application.yml 참조
#
# @author windsurf
# @since 1.0.0
# ===============================================

# ===============================================
# Springdoc (Swagger/OpenAPI) 설정
# Gateway 라우팅 패턴(/api/v1/crawling/**)에 맞춰 경로 설정
# ApiDocsController가 커스텀 서빙하므로 기본 swagger-ui는 비활성화
# ===============================================
springdoc:
  api-docs:
    enabled: ${SPRINGDOC_ENABLED:true}
    path: /api/v1/crawling/api-docs
  swagger-ui:
    enabled: false
  packages-to-scan: com.ryuqq.crawlinghub.adapter.in.rest
  cache:
    disabled: true
  default-consumes-media-type: application/json
  default-produces-media-type: application/json

# ===============================================
# Security Configuration
# ===============================================
# Service Token 인증 설정
security:
  # Service Token 인증 설정 (서버 간 내부 통신용)
  # SSM Parameter Store에서 환경변수로 주입됨
  service-token:
    enabled: ${SECURITY_SERVICE_TOKEN_ENABLED:false}
    secret: ${SECURITY_SERVICE_TOKEN_SECRET:}

# ===============================================
# API Endpoint Configuration
# ===============================================
# REST API 엔드포인트 경로 중앙 관리
# @see com.ryuqq.adapter.in.rest.config.properties.ApiEndpointProperties
api:
  server:
    url: ${API_SERVER_URL:}
  endpoints:
    # API v1 베이스 경로
    base-v1: /api/v1

    # Seller 도메인 엔드포인트
    seller:
      base: /sellers
      by-id: /{id}
      status: /{id}/status

    # Schedule 도메인 엔드포인트
    schedule:
      base: /schedules
      by-id: /{id}

  # 에러 응답 설정 (RFC 7807 Problem Details)
  # @see com.ryuqq.adapter.in.rest.config.properties.ApiErrorProperties
  error:
    # 에러 타입 문서 베이스 URL
    # 프로덕션: https://api.example.com/problems
    # 개발: about:blank (기본값)
    base-url: about:blank

    # about:blank 사용 여부 (true: 문서 URL 무시, false: base-url 사용)
    use-about-blank: true
