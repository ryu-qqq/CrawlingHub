<?xml version="1.0" encoding="UTF-8"?>
<FindBugsFilter>
    <!-- EI2: Exposed Internal Representation - All Spring DI fields -->
    <!-- Spring DI로 주입되는 객체들은 Spring Container가 관리하므로 안전 -->
    <Match>
        <Bug pattern="EI_EXPOSE_REP2"/>
    </Match>

    <!-- NP: Null Pointer - Test setUp() methods -->
    <!-- @BeforeEach에서 항상 초기화되므로 안전 -->
    <Match>
        <Bug pattern="NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE"/>
        <Class name="~.*Test"/>
        <Method name="setUp"/>
    </Match>

    <!-- NP: Null Pointer - UserAgentPoolManager -->
    <!-- ZPOPMIN 결과는 비즈니스 로직에서 null 체크됨 -->
    <Match>
        <Bug pattern="NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE"/>
        <Class name="com.ryuqq.crawlinghub.adapter.redis.pool.UserAgentPoolManager"/>
        <Method name="acquireLeastRecentlyUsed"/>
    </Match>

    <!-- BC: Unchecked Cast - Testcontainers -->
    <!-- @Container 어노테이션으로 타입 안전성 보장됨 -->
    <Match>
        <Bug pattern="BC_UNCONFIRMED_CAST"/>
        <Class name="~.*Test"/>
    </Match>

    <Match>
        <Bug pattern="BC_UNCONFIRMED_CAST_OF_RETURN_VALUE"/>
        <Class name="~.*Test"/>
    </Match>

    <!-- RV: Return Value Ignored - ExecutorService.submit() -->
    <!-- 동시성 테스트에서 Future 반환값 무시는 의도된 동작 -->
    <Match>
        <Bug pattern="RV_RETURN_VALUE_IGNORED_BAD_PRACTICE"/>
        <Class name="com.ryuqq.crawlinghub.adapter.redis.lock.DistributedLockServiceTest"/>
        <Method name="concurrencyTest"/>
    </Match>
</FindBugsFilter>
